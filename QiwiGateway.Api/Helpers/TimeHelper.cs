namespace QiwiGateway.Api.Helpers;

public static class TimeHelper
{
    // ??? ??????? ???? (????? ????????? ????? ????????????)
    private static readonly TimeZoneInfo LocalTimeZone = TimeZoneInfo.Local;
    
    // ?????????????? UTC ? ????????? ?????
    public static DateTime ToLocalTime(DateTime utcDateTime)
    {
        if (utcDateTime.Kind == DateTimeKind.Utc)
        {
            return TimeZoneInfo.ConvertTimeFromUtc(utcDateTime, LocalTimeZone);
        }
        return utcDateTime;
    }
    
    // ???????? ??????? ????? ? ????????? ???? (??? ?????)
    public static DateTime Now => ToLocalTime(DateTime.UtcNow);
    
    // ????????????? ??? ?????
    public static string FormatForLog(DateTime? dateTime = null)
    {
        var dt = dateTime ?? DateTime.UtcNow;
        return ToLocalTime(dt).ToString("yyyy-MM-dd HH:mm:ss");
    }
}
